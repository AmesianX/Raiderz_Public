<?xml version="1.0" encoding="UTF-8" ?>
<?xml-stylesheet href="./colt.xsl" type="text/xsl"?>
<!--
# 바다 트롤, 호수 트롤	
210931600	idle2
210931601	포효1
210931602	포효2
210931603	일반공격1
210931604	일반공격2
210931605	강한공격
210931606	대쉬공격
210931607	돌던지기
210931608	엉덩방아
210931609	pain
-->
<maiet>
	<COLT name="바다 트롤" npcid="109316">
		<COMBAT>
			<DEFAULT>
				<ACTION type="talent" param1="210931605" rate="30" />
				<ACTION type="talent" param1="210931603" rate="30" />
				<ACTION type="talent" param1="210931608" rate="30" cycle="25" />
			</DEFAULT>
			
			<CHECK type="distance" param1="300">
				<ACTION type="talent" param1="210931601" rate="10" cycle="25" />
				<ACTION type="talent" param1="210931605" rate="30" />
			</CHECK>
		</COMBAT>
		<IDLE>
			<DEFAULT>
				<ACTION type="talent" param1="210931600" rate="70" />
				<ACTION type="talent" param1="210931602" rate="10" />
				<ACTION type="nothing" param1="2" rate="30" />
			</DEFAULT>
		</IDLE>
	</COLT>
	
	<SCRIPT><![CDATA[
	function NPC_109316:Init(NPCID)
		NPC_109316.BP_Bag = 1
		NPC_109316.TALENT_Pain = 210931609 -- 뿔에 맞으면 쓰는 탤런트
		NPC_109316.LIMIT_BParts	= NPC_109316.MaxHP*0.8
	end
	
	function NPC_109316:OnHitCapsule_1_0(HitInfo) -- hp 70이하일 때 브레이커블 파츠가 확율적으로 부숴진다
	
		local ThisNPC = AsNPC( HitInfo.Victim )	
	
		if ThisNPC:CheckBPart( NPC_109316.BP_Bag ) then
			return HitInfo
		end
		
		if( ThisNPC:GetHP() <= NPC_109316.LIMIT_BParts ) and ( math.random( 1, 100 ) <= 6 ) then
			ThisNPC:ClearJob()
			ThisNPC:UseTalentSelf( NPC_109316.TALENT_Pain )
			ThisNPC:BreakPart(1, HitInfo.Attacker)
		end
		
		return HitInfo		
	end
	
	]]></SCRIPT>
</maiet>
